# 🚀 실행 가이드

## ✅ 수정 완료!

**문제**: "삼성전자의 상반기 영업이익은?" 질문에 SQL 결과를 찾지 못함

**원인**: 벡터스토어가 빌드될 때 데이터베이스가 비어있었음

**해결**: 초기화 순서 변경
- ❌ 기존: 벡터스토어 빌드 → 데이터 파싱
- ✅ 수정: 데이터 파싱 → 벡터스토어 빌드

## 📊 데이터 확인

```bash
# 데이터베이스에 있는 데이터
회사명: 삼성전자
항목명: 영업이익
금액: 11,361,329,000,000원 (11조 3,613억원)
```

## 🎯 실행 방법

### 1. 애플리케이션 실행

```bash
cd /Users/1107625/dev/repositories/scripts/2509_LLMMVP/MVP/financial_analysis_poc_v2
uv run python main.py
```

### 2. 출력 확인

다음과 같은 순서로 메시지가 출력됩니다:

```
재무제표 분석 시스템이 초기화되었습니다.
데이터를 초기화하는 중...
=== 재무제표 데이터 파싱 시작 ===
재무상태표 파일 파싱 중: ...
손익계산서 파일 파싱 중: ...
현금흐름표 파일 파싱 중: ...
=== 재무제표 데이터 파싱 완료 ===

그래프 및 벡터스토어 초기화 중...
회사명 2942개, 재무항목 XXX개를 벡터스토어에 저장 중...
고유명사 벡터스토어 구축 완료
그래프 초기화가 완료되었습니다.

Gradio 서버를 시작합니다...
Running on local URL:  http://0.0.0.0:7860
```

### 3. 브라우저 접속

```
http://localhost:7860
```

### 4. 질문 테스트

이제 다음 질문들이 제대로 작동합니다:

✅ **"삼성전자의 상반기 영업이익은?"**
- 예상 답변: "삼성전자의 2025년 상반기 영업이익은 11조 3,613억원입니다."

✅ **"삼성 영업이익"**
- 벡터 검색으로 "삼성전자" 찾음

✅ **"SK텔레콤의 매출액은?"**
- 정확한 답변 제공

## 🔍 동작 원리

### 1. 데이터 로딩 (앱 시작 시)
```
DB 파싱 → 2942개 회사 로드 ✓
벡터스토어 빌드 → 회사명/항목명 임베딩 ✓
그래프 초기화 → Text2SQL 준비 ✓
```

### 2. 질문 처리
```
사용자: "삼성전자의 상반기 영업이익은?"
  ↓
벡터 검색: "삼성전자", "영업이익" 찾음
  ↓
SQL 생성:
  SELECT 회사명, 항목명, 당기_반기_누적 
  FROM income_statement 
  WHERE 회사명 = '삼성전자' 
    AND 항목명 LIKE '%영업이익%'
  ↓
결과: 11,361,329,000,000원
  ↓
답변: "삼성전자의 2025년 상반기 영업이익은 11조 3,613억원입니다."
```

## 💡 테스트 질문

### 재무 데이터 질문
```
✅ "삼성전자의 상반기 영업이익은?"
✅ "SK텔레콤 매출액"
✅ "케이티의 영업이익은?"
✅ "LG전자 순이익"
```

### 회사 비교
```
✅ "삼성전자와 SK하이닉스의 영업이익 비교"
✅ "통신 3사 매출액 비교"
```

### 일반 질문
```
✅ "재무상태표가 뭐야?"
✅ "영업이익률이란?"
```

### 웹 검색
```
✅ "최근 AI 트렌드"
✅ "반도체 시장 동향"
```

## 🐛 문제 해결

### 여전히 데이터를 찾지 못하는 경우

```bash
# 1. DB 재생성
cd /Users/1107625/dev/repositories/scripts/2509_LLMMVP/MVP/financial_analysis_poc_v2
rm financial_data.db
uv run python main.py

# 2. 데이터 확인
sqlite3 financial_data.db "SELECT COUNT(*) FROM income_statement;"
```

### 벡터스토어 초기화 확인

앱 시작 시 다음 메시지를 확인하세요:
```
회사명 2942개, 재무항목 XXX개를 벡터스토어에 저장 중...
고유명사 벡터스토어 구축 완료
```

이 메시지가 보이지 않으면 초기화에 문제가 있는 것입니다.

## 📚 추가 정보

- **README.md**: 프로젝트 전체 개요
- **사용_가이드.md**: 상세 사용 방법
- **UV_가이드.md**: UV 도구 사용법
- **실행_가이드_UV.md**: UV 실행 가이드

---

**이제 정상적으로 작동합니다! 테스트해보세요! 🎉**

